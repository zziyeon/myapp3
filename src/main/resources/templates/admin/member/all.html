<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원 목록</title>
    <style>
        table {
            border:1px solid;
            border-collapse: collapse;
        }
        td, th {
            border:1px solid;
            padding:5px;
        }

    </style>
</head>
<body>
<div class="product-wrap">
    <h3>회원목록</h3>
    <hr>
    <table>
        <colgroup>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
        </colgroup>
        <thead>
        <tr>
            <th>순번</th>
            <th>아이디</th>
            <th>이메일</th>
            <th>비밀번호</th>
            <th>닉네임</th>
            <th>등록일</th>
            <th>수정일</th>
        </tr>
        </thead>
        <tbody>
        <!--        <tr th:each="member:${list}">-->
        <!--            <td><a href="/admin/members/24" th:href="@{/admin/members/{id}(id=${member.memberId})}"-->
        <!--                   th:text="${member.memberId}"></a></td>-->
        <!--            <td th:text="${member.email}"></td>-->
        <!--            <td th:text="${member.pw}">10</td>-->
        <!--            <td th:text="${member.nickname}"></td>-->
        <!--            <td th:text="${member.cdate}"></td>-->
        <!--            <td th:text="${member.udate}"></td>-->
        <!--        </tr>-->

        <!--        <tr th:each="rec : ${list}" th:onclick="|location.href='@{/admin/members/{id}(id=${rec.memberId})}'|">-->
        <tr th:each="rec : ${list}" th:data-member-id="${rec.memberId}">
            <td>[[${recStat.count}]]</td>
            <!--            <td><a th:href="@{|/admin/members/${rec.memberId}|}">[[${rec.memberId}]]</a> </td>-->
            <td>[[${rec.memberId}]]</td>
            <td>[[${rec.email}]]</td>
            <td>[[${rec.pw}]]</td>
            <td>[[${rec.nickname}]]</td>
            <!--            <td>[[${{rec.cdate}}]]</td>-->
            <td>[[${#temporals.format(rec.cdate,'yyyy-MM-dd HH:mm')}]]</td>
            <td>[[${#temporals.format(rec.udate,'yyyy-MM-dd HH:mm')}]]</td>
        </tr>
        </tbody>
    </table>
    <hr>
    <div>
        <button id="addBtn">회원 등록</button>
    </div>
</div>
<script>
    const $tbody = document.querySelector("table tbody");
    $tbody.addEventListener('click', e=> {
        if(e.target.tagName == 'TD'){
            const memberId = e.target.parentElement.dataset.memberId;
            location.href = `/admin/members/${memberId}`;
        }
    });
    //등록버튼
    addBtn.addEventListener('click', e=>{
        location.href = '/admin/members/add';
    });

</script>

</body>
</html>